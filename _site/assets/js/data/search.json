[ { "title": "Upgrade Proxmox from CLI", "url": "/posts/upgrade-proxmomx-from-cli/", "categories": "Proxmox", "tags": "Proxmox, Ubuntu, LXC", "date": "2024-02-07 09:59:00 -0500", "snippet": "To upgrade only packages that are installed.apt-get update &amp;&amp; apt-get upgradeNo reboot is necesary.To update a node entirelyapt-get update &amp;&amp; apt-get dist-upgradeOnly reboot the nod...", "content": "To upgrade only packages that are installed.apt-get update &amp;&amp; apt-get upgradeNo reboot is necesary.To update a node entirelyapt-get update &amp;&amp; apt-get dist-upgradeOnly reboot the node if necesary." }, { "title": "Create ZFS Storage Folder on Proxmox Server", "url": "/posts/create-zfs-storage-folder/", "categories": "Proxmox", "tags": "Proxmox, Ubuntu, LXC", "date": "2023-11-29 09:03:20 -0500", "snippet": "Lets start by listing the currently available data setszfs listThis should give you a list of folders (if any exist)To create a new data set, run the following command. This will also set some defa...", "content": "Lets start by listing the currently available data setszfs listThis should give you a list of folders (if any exist)To create a new data set, run the following command. This will also set some default permissions.zfs create -o mountpoint=/tank/data/photos/ -o acltype=posixacl -o xattr=sa -o aclinherit=passthrough tank/data/photosTo set a quota on the datasetzfs set quota=1000G tank/data/photosTo remove the datasetzfs destroy -R -r tabk/data/photosIf you want to use the dataset in an LXCnano /etc/pve/lxc/{INSERT_LXC_ID_HERE}.conf" }, { "title": "Install NVIDIA GPU Drivers on Proxmox", "url": "/posts/install-nvidia-gpu/", "categories": "Proxmox", "tags": "Proxmox, Ubuntu, VM", "date": "2023-11-29 09:03:20 -0500", "snippet": "Download compatible drivers for your Proxmox version", "content": "Download compatible drivers for your Proxmox version" }, { "title": "Building ExpressionEngine with Coiplack - Part 1", "url": "/posts/coilpack/", "categories": "ExpressionEngine", "tags": "ExpressionEngine, Coilpack", "date": "2023-10-15 11:54:29 -0400", "snippet": "Comming soon", "content": "Comming soon" }, { "title": "How to configure application email using your Google account", "url": "/posts/google-smtp-settings/", "categories": "Email", "tags": "Email", "date": "2023-04-02 20:00:00 -0400", "snippet": " Here is a common set-up for configuring applications to use your Google account to send transaction based email.SMTP Server: smtp.gmail.comSMTP port: 465Encryption mode: SSL/TLSSender email: your...", "content": " Here is a common set-up for configuring applications to use your Google account to send transaction based email.SMTP Server: smtp.gmail.comSMTP port: 465Encryption mode: SSL/TLSSender email: your emailAuthetication required: yesUsername: your usernamePassword: Generate an app password in your Google admin panel" }, { "title": "Using PCT commands", "url": "/posts/proxmox-pct-commands/", "categories": "Proxmox", "tags": "Proxmox", "date": "2023-04-02 11:51:30 -0400", "snippet": "Here are some useful pct commands for every day management of your containers and VM’s.ContainersStart container.pct start {container_id}Stop container.pct start {container_id}Resize boot disk.pct ...", "content": "Here are some useful pct commands for every day management of your containers and VM’s.ContainersStart container.pct start {container_id}Stop container.pct start {container_id}Resize boot disk.pct resize {container_id} rootfs {size in Gigabytes ex 8G}" }, { "title": "How to upload ISO files from your local computer to Proxmox", "url": "/posts/proxmox-upload-iso/", "categories": "Proxmox", "tags": "Proxmox", "date": "2023-04-01 12:15:29 -0400", "snippet": "Sometimes, Proxmox doesn’t play nice when you try to upload an ISO file. There can be size restrictions and other bugs that stop you in your tracks. Here is an easy command that you can run.scp fil...", "content": "Sometimes, Proxmox doesn’t play nice when you try to upload an ISO file. There can be size restrictions and other bugs that stop you in your tracks. Here is an easy command that you can run.scp file_address root@192.xxx.x.xxx:/var/lib/vz/template/iso" }, { "title": "How to pin your Proxmox kernal", "url": "/posts/proxmox-pin-kernal/", "categories": "Proxmox", "tags": "Proxmox, Kernal", "date": "2023-04-01 12:15:29 -0400", "snippet": "Why would you want to pin your Proxmox kernal? Consider this scenario. I have a NVIDIA driver that my Plex and Emby servers use that works great with the kernal that is currently installed. If I de...", "content": "Why would you want to pin your Proxmox kernal? Consider this scenario. I have a NVIDIA driver that my Plex and Emby servers use that works great with the kernal that is currently installed. If I decide to install the latest updates for Proxmox and it contains a new Kernal, it could cause problems for that driver and possibly break other things as well.There is a way to configure your NVIDIA set-up so that it automatically upgrades the drivers when you install a new kernal but that doesn’t mean it won’t break something.Here is the code that I ran to to pin my kernal. The version of Proxmox that I am running is 7.3.6. List all of the available kernals (there cpuld be more than one)/usr/sbin/proxmox-boot-tool kernel list Find out the version of kernal you are currently usinguname -rThis will output something like 5.15.85-1-pve Finally, run the command to pin your kernal/usr/sbin/proxmox-boot-tool kernel pin &lt;&lt; paste what was output from the previous command here &gt;&gt;That’s it! Now you should be able to run the update tool in Proxmox and not worry about a new Kernal breaking your set-up until you are confident you can upgrade it." }, { "title": "How to update hostname for Ubuntu server", "url": "/posts/create_and_mount_zfz/", "categories": "Proxmox", "tags": "Proxmox, Ubuntu, VM", "date": "2023-02-01 07:11:45 -0500", "snippet": "Create data set and mount point with ACL permissionszfs create -o mountpoint=/storage/timemachine/ -o acltype=posixacl -o xattr=sa -o aclinherit=passthrough rpool/timemachineset storge quotazfs set...", "content": "Create data set and mount point with ACL permissionszfs create -o mountpoint=/storage/timemachine/ -o acltype=posixacl -o xattr=sa -o aclinherit=passthrough rpool/timemachineset storge quotazfs set quota=2000G rpool/timemachinefstabtimemachine /zfs/timemachine 9p trans=virtio,version=9p2000.L,nobootwait,rw,msize=524288,user_xattr,posixacl,_netdev 0 0mountmount -acheck itfindmnt -lo source,target,fstype,label,options,used -t 9p" }, { "title": "How to update hostname for Ubuntu server", "url": "/posts/proxmox-update-hostname/", "categories": "Proxmox", "tags": "Proxmox, Ubuntu, VM", "date": "2023-02-01 07:11:45 -0500", "snippet": "Update /etc/hostname (give it a meanigfull name)sudo nano /etc/hostnameAnd also update:sudo nano /etc/hosts", "content": "Update /etc/hostname (give it a meanigfull name)sudo nano /etc/hostnameAnd also update:sudo nano /etc/hosts" }, { "title": "How to assign a static IP to an Ubuntu 20.04 server", "url": "/posts/assign-staic-ip/", "categories": "Ubuntu", "tags": "Linux, Ubuntu", "date": "2022-10-15 11:54:29 -0400", "snippet": "Follow these steps to assign static IP to Ubuntu server.If the server was provisioned with CloudInit, do the following first. The filename may vary.sudo cat /etc/cloud/cloud.cfg.d/subiquity-disable...", "content": "Follow these steps to assign static IP to Ubuntu server.If the server was provisioned with CloudInit, do the following first. The filename may vary.sudo cat /etc/cloud/cloud.cfg.d/subiquity-disable-cloudinit-networking.cfgand make sure it is set to disablednetwork: {config: disabled}Next, you should run the following command to figure out what your nic is and make a note of it because you will need this information when we change the network config.ip linkNow we need to edit the network configsudo nano /etc/netplan/00-installer-config.yamlAnd change it to the below. Make sure to update the nic id. The nic id in the code below is ens3.network: version: 2 renderer: networkd ethernets: ens3: dhcp4: no addresses: - 192.168.2.xxx/24 routes: - to: default via: 192.168.2.1 nameservers: addresses: [8.8.8.8, 8.8.4.4]Now apply the changessudo netplan applyVerify the changeip addr show dev ens3" }, { "title": "How to create a container (LXE) template running Ubuntu 20.04", "url": "/posts/lxe-ccontainer-template/", "categories": "Proxmox", "tags": "Proxmox, Ubuntu, LXE", "date": "2022-10-15 11:54:29 -0400", "snippet": "Upgrade the system packages.sudo apt update &amp;&amp; sudo apt dist-upgradeClean up the container (optional)sudo apt clean &amp;&amp; sudo apt autoremoveAdd a new user.adduser {your username}Confi...", "content": "Upgrade the system packages.sudo apt update &amp;&amp; sudo apt dist-upgradeClean up the container (optional)sudo apt clean &amp;&amp; sudo apt autoremoveAdd a new user.adduser {your username}Configure SSH.Change to /etc/ssh directory.cd /etc/sshClear out the host keys (make sur eyou stay logged in).sudo rm ssh_host_*Make the machine ID unique. First check that it exists (it will show up as a string of characters).cat /ect/machine-idClear it out.sudo truncate -s 0 /etc/machine-idShut down the container.sudo powerdownIn Proxmox, right click on container and convert container to a template.Start it up and use the console to login and run the following command.sudo dpkg-reconfigure openssh-serverThen, in a terminal, try to ssh into the container.ssh {your_username}@{your_ip} You can get the IP of your container from the console in Proxmox by running: ip a " }, { "title": "How to create a VM template for Ubuntu 20.04", "url": "/posts/proxmox-vm-template-setup/", "categories": "Proxmox", "tags": "Proxmox, Ubuntu, VM", "date": "2022-10-15 11:54:29 -0400", "snippet": "This post is a guide on how to convert any VM into a template that can be used to clone new servers.Control panel config Hardware &gt; CD/DVD Drive (ide2) &gt; edit and select “do not use any medi...", "content": "This post is a guide on how to convert any VM into a template that can be used to clone new servers.Control panel config Hardware &gt; CD/DVD Drive (ide2) &gt; edit and select “do not use any media” Hardware &gt; Add &gt; CloudInit Drive (needed for cloning to work) Options &gt; QEMU Guest Agent. Click on Edit and check “Use QENU Guest Agent”. Options &gt; Start at boot. Click on Edit and check box. Cloud-Init and change user and password options.Update system and set-up QEMU agentsudo apt update &amp;&amp; sudo apt dist-upgradesudo apt install qemu-guest-agentsudo systemctl start qemu-guest-agent.servicesystemctl status qemu-guest-agent.serviceMake sure cloud-init is installedapt search cloud-initClear out host keysls -l /etc/sshsudo rm /etc/ssh/ssh_host_*Automate creation of SSH host keysCopy and paste these contents into regenerate_ssh_host_keys.service[Unit]Description=Regenerate SSH host keysBefore=ssh.serviceConditionFileIsExecutable=/usr/bin/ssh-keygen [Service]Type=oneshotExecStartPre=-/bin/dd if=/dev/hwrng of=/dev/urandom count=1 bs=4096ExecStartPre=-/bin/sh -c \"/bin/rm -f -v /etc/ssh/ssh_host_*_key*\"ExecStart=/usr/bin/ssh-keygen -A -vExecStartPost=/bin/systemctl disable regenerate_ssh_host_keys [Install]WantedBy=multi-user.targetnano regenerate_ssh_host_keys.servicesudo chown root:root regenerate_ssh_host_keys.servicesudo mv regenerate_ssh_host_keys.service /etc/systemd/systemsudo systemctl daemon-reloadsudo systemctl enable regenerate_ssh_host_keys.servicesudo systemctl status regenerate_ssh_host_keys.service # verify it is enabledMake sure machine-id is emptycat /etc/machine-id # needs to be uniquesudo truncate -s 0 /etc/machine-id # empty it out# check to ensure symlink exists (if it doesn't create it - sudo ln -s /var/lib/dbus/machine-id /etc/machine-id)ls -l /var/lib/dbus/machine-idRun the following to make sure your image is as clean as possiblesudo apt cleansudo apt autoremovesudo poweroffPost Set-up commands to runYou should change the hostname for your new VM’s created form the clone so they are easy to identifysudo nano /etc/hostname # change it to whatever you wantsudo nano /etc/hosts # find the old hostname an dupdate it" }, { "title": "How to install Docker on Ubuntu 20.04", "url": "/posts/docker-setup/", "categories": "Docker", "tags": "Docker, Ubuntu, VM", "date": "2022-10-15 11:54:29 -0400", "snippet": "Install DockerUpdate the system.sudo apt-get updateInstall required libraries.sudo apt install -y apt-transport-https ca-certificates curl gnupg2 software-properties-commonAdd Docker repository.cur...", "content": "Install DockerUpdate the system.sudo apt-get updateInstall required libraries.sudo apt install -y apt-transport-https ca-certificates curl gnupg2 software-properties-commonAdd Docker repository.curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - Add Repository to the system.sudo add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\" Install Docker and Docker Compose.sudo apt install -y docker-ce &amp;&amp; sudo apt install docker-composeCheck that it’s working properly.sudo systemctl status dockerThe output should look like this:docker.service - Docker Application Container Engine Loaded: loaded (/lib/systemd/system/docker.service; enabled; vendor preset: enabled) Active: active (running) since Mon 2020-05-25 14:45:19 UTC; 1min 14s agoDocs: https://docs.docker.comMain PID: 856 (dockerd)Tasks: 10Memory: 42.8MCPU: 209ms CGroup: /system.slice/docker.service └─856 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sockCreate a simple container to test.sudo docker run hello-worldInstall docker-composesudo curl -L \"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-composesudo chmod +x /usr/local/bin/docker-composedocker-compose --versionRun Docker commands as non root usersudo usermod -aG docker $USER &amp;&amp; newgrp dockerCheck to see if you can run a docker command as non root userdocker run hello-world" } ]
